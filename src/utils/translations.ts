/**
 * Dictionnaire de traductions pour les données MyAnimeList
 */

// Genres - Dictionnaire complet de traductions
export const genreTranslations: Record<string, string> = {
  // Genres principaux
  'Action': 'Action',
  'Adventure': 'Aventure',
  'Comedy': 'Comédie',
  'Comedie': 'Comédie',
  'Drama': 'Drame',
  'Ecchi': 'Ecchi',
  'Fantasy': 'Fantastique',
  'Fantastique': 'Fantastique',
  'Fantaisie': 'Fantastique',
  'Horror': 'Horreur',
  'Mystery': 'Mystère',
  'Psychological': 'Psychologique',
  'Romance': 'Romance',
  'Sci-Fi': 'Science-Fiction',
  'Sci-fi': 'Science-Fiction',
  'Science Fiction': 'Science-Fiction',
  'Science-fiction': 'Science-Fiction',
  'Slice of Life': 'Tranche de vie',
  'Slice-of-Life': 'Tranche de vie',
  'Slice Of Life': 'Tranche de vie',
  'Slice of life': 'Tranche de vie',
  'Tranches de vie': 'Tranche de vie',
  'Sports': 'Sport',
  'Sport': 'Sport',
  'Supernatural': 'Surnaturel',
  'Surnaturel': 'Surnaturel',
  'Supernaturel': 'Surnaturel',
  'Thriller': 'Thriller',
  'Suspense': 'Suspense',
  'Award Winning': 'Primé',
  'Avant Garde': 'Avant-garde',
  'Gourmet': 'Gastronomie',
  'Girls Love': 'Amour entre filles',
  'Boys Love': 'Amour entre garçons',
  'Shounen': 'Shōnen',
  'Shonen': 'Shōnen',
  'Shoujo': 'Shōjo',
  'Shojo': 'Shōjo',
  'Shoujo(G)': 'Shōjo',
  'Shôjo': 'Shōjo',
  'Shônen': 'Shōnen',
  'Seinen': 'Seinen',
  'Josei': 'Josei',
  'Isekai': 'Isekai',
  'Mecha': 'Mecha',
  'Harem': 'Harem',
  'Reverse Harem': 'Harem inversé',
  
  // Types de médias
  'Manga': 'Manga',
  'Manhwa': 'Manhwa',
  'Manhua': 'Manhua',
  'Webtoon': 'Webtoon',
  'Webtoons': 'Webtoon',
  'Webcomic': 'Webcomic',
  
  // Thèmes comme genres (parfois mélangés)
  'Adult Cast': 'Distribution adulte',
  'Anthropomorphic': 'Anthropomorphe',
  'CGDCT': 'Filles mignonnes',
  'Childcare': 'Garde d\'enfants',
  'Crossdressing': 'Travestissement',
  'Delinquents': 'Délinquants',
  'Demons': 'Démons',
  'Gag Humor': 'Humour absurde',
  'Gore': 'Gore',
  'High Stakes Game': 'Jeu à haut risque',
  'Historical': 'Historique',
  'Historique': 'Historique',
  'Idols (Female)': 'Idoles (Femmes)',
  'Idols (Male)': 'Idoles (Hommes)',
  'Iyashikei': 'Iyashikei',
  'Love Polygon': 'Triangle amoureux',
  'Love Status Quo': 'Statu quo amoureux',
  'Magical Sex Shift': 'Changement de sexe magique',
  'Mahou Shoujo': 'Magical Girl',
  'Martial Arts': 'Arts martiaux',
  'Martial arts': 'Arts martiaux',
  'Arts Martiaux': 'Arts martiaux',
  'Art Martiaux': 'Arts martiaux',
  'Arts martiaux': 'Arts martiaux',
  'Medical': 'Médical',
  'Médical': 'Médical',
  'Military': 'Militaire',
  'Militaire': 'Militaire',
  'Music': 'Musique',
  'Musique': 'Musique',
  'Mythology': 'Mythologie',
  'Mythologie': 'Mythologie',
  'Organized Crime': 'Crime organisé',
  'Otaku Culture': 'Culture otaku',
  'Parody': 'Parodie',
  'Performing Arts': 'Arts du spectacle',
  'Pets': 'Animaux de compagnie',
  'Reincarnation': 'Réincarnation',
  'Réincarnation': 'Réincarnation',
  'Samurai': 'Samouraï',
  'School': 'Vie Scolaire',
  'School Life': 'Vie Scolaire',
  'School life': 'Vie Scolaire',
  'School-life': 'Vie Scolaire',
  'Ecole': 'Vie Scolaire',
  'Showbiz': 'Show-business',
  'Space': 'Espace',
  'Strategy Game': 'Jeu de stratégie',
  'Super Power': 'Super pouvoir',
  'Survival': 'Survie',
  'Survie': 'Survie',
  'Team Sports': 'Sports d\'équipe',
  'Time Travel': 'Voyage dans le temps',
  'Urban Fantasy': 'Fantasy urbaine',
  'Vampire': 'Vampire',
  'Vampires': 'Vampire',
  'Video Game': 'Jeu vidéo',
  'Villainess': 'Vilaine',
  'Visual Arts': 'Arts visuels',
  'Workplace': 'Travail',
  
  // Genres spécifiques
  'Erotica': 'Érotique',
  'Erotique': 'Érotique',
  'Hentai': 'Hentai',
  'Mature': 'Mature',
  'Smut': 'Smut',
  'Guerre': 'Guerre',
  'Combat': 'Combat',
  'Tragedy': 'Tragédie',
  'Tragique': 'Tragédie',
  'Tragédie': 'Tragédie',
  'Returner': 'Retour dans le temps',
  'Revenge': 'Vengeance',
  'Post-Apo': 'Post-apocalyptique',
  'Magic': 'Magie',
  'Magie': 'Magie',
  'magie': 'Magie',
  'Donjon': 'Donjon',
  'Dragon': 'Dragon',
  'Démon': 'Démon',
  
  // Formats et types spéciaux
  '4-koma manga': 'Manga 4-koma',
  'Yonkoma': 'Yonkoma',
  'Guidebook': 'Guide',
  'Histoires courtes': 'Histoires courtes',
  'Global-manga': 'Manga global',
  'Full Color': 'Couleur',
  'Comic': 'Comics',
  'Bd': 'Bande dessinée',
  'Biographique': 'Biographique',
  'Amitié': 'Amitié',
  'Amour': 'Amour',
  'Mariage': 'Mariage',
  'Nekketsu': 'Nekketsu',
  'Adaptation': 'Adaptation',
  'Completed': 'Complété',
  'Shôjo-aï': 'Shōjo-aï',
  'Shônen-aï': 'Shōnen-aï',
  'Content rating: Suggestive': 'Suggestif',
  
  // Noms de scans (conservés tels quels)
  'Anteiku Scan': 'Anteiku Scan',
  'Astral Scan': 'Astral Scan',
  'Flamescans': 'Flamescans',
  'Flamesscans': 'Flamescans',
  'GoFast': 'GoFast',
  'Little Garden': 'Little Garden',
  'Moon Scans': 'Moon Scans',
  'Manga Corporation': 'Manga Corporation',
  'OriTrad': 'OriTrad',
  'Osiris Scans': 'Osiris Scans',
  'Pearlscan': 'Pearlscan',
  'Phénix scans': 'Phénix scans',
  'Raijin Scans': 'Raijin Scans',
  'Reaper Scans': 'Reaper Scans',
  'Rimu Scans': 'Rimu Scans',
  'Ryozanpaku Scantrad': 'Ryozanpaku Scantrad',
  'Scantrad Union': 'Scantrad Union',
  'Secret du roi': 'Secret du roi',
  'Starbound Scans': 'Starbound Scans',
  'Tappytoon': 'Tappytoon',
  'Team Clachoufoufou': 'Team Clachoufoufou',
  'BAKA-Ecchi': 'BAKA-Ecchi',
  'Manga hentai': 'Manga hentai',
  'Manga romance': 'Manga romance',
  'Little Breasts': 'Little Breasts',
  'Slave': 'Esclave',
  'Perf': 'Perf',
  'Japonais': 'Japonais'
};

// Thèmes
export const themeTranslations: Record<string, string> = {
  'Adult Cast': 'Distribution adulte',
  'Anthropomorphic': 'Anthropomorphe',
  'CGDCT': 'Filles mignonnes',
  'Childcare': 'Garde d\'enfants',
  'Combat Sports': 'Sports de combat',
  'Crossdressing': 'Travestissement',
  'Delinquents': 'Délinquants',
  'Detective': 'Détective',
  'Educational': 'Éducatif',
  'Gag Humor': 'Humour absurde',
  'Gore': 'Gore',
  'Harem': 'Harem',
  'High Stakes Game': 'Jeu à haut risque',
  'Historical': 'Historique',
  'Idols (Female)': 'Idoles (Femmes)',
  'Idols (Male)': 'Idoles (Hommes)',
  'Isekai': 'Isekai',
  'Iyashikei': 'Iyashikei',
  'Love Polygon': 'Triangle amoureux',
  'Love Status Quo': 'Statu quo amoureux',
  'Magical Sex Shift': 'Changement de sexe magique',
  'Mahou Shoujo': 'Magical Girl',
  'Martial Arts': 'Arts martiaux',
  'Mecha': 'Mecha',
  'Medical': 'Médical',
  'Military': 'Militaire',
  'Music': 'Musique',
  'Mythology': 'Mythologie',
  'Organized Crime': 'Crime organisé',
  'Otaku Culture': 'Culture otaku',
  'Parody': 'Parodie',
  'Performing Arts': 'Arts du spectacle',
  'Pets': 'Animaux de compagnie',
  'Psychological': 'Psychologique',
  'Racing': 'Course',
  'Reincarnation': 'Réincarnation',
  'Reverse Harem': 'Harem inversé',
  'Romantic Subtext': 'Sous-texte romantique',
  'Samurai': 'Samouraï',
  'School': 'Vie Scolaire',
  'Showbiz': 'Show-business',
  'Space': 'Espace',
  'Strategy Game': 'Jeu de stratégie',
  'Super Power': 'Super pouvoir',
  'Survival': 'Survie',
  'Team Sports': 'Sports d\'équipe',
  'Time Travel': 'Voyage dans le temps',
  'Urban Fantasy': 'Fantasy urbaine',
  'Vampire': 'Vampire',
  'Video Game': 'Jeu vidéo',
  'Villainess': 'Vilaine',
  'Visual Arts': 'Arts visuels',
  'Workplace': 'Travail',
  'Zombies': 'Zombies',
  // Variantes depuis Nautiljon
  'Autre monde': 'Autre monde',
  'Magie': 'Magie',
  'Réincarnation / Transmigration': 'Réincarnation / Transmigration',
  'Transmigration': 'Transmigration'
};

// Démographies - Dictionnaire complet de traductions
export const demographicTranslations: Record<string, string> = {
  'Shounen': 'Shōnen',
  'Shonen': 'Shōnen', // Variante sans accent
  'Shōnen': 'Shōnen', // Variante avec accent
  'Shoujo': 'Shōjo',
  'Shojo': 'Shōjo', // Variante sans accent
  'Shōjo': 'Shōjo', // Variante avec accent
  'Seinen': 'Seinen',
  'Josei': 'Josei',
  'Kids': 'Enfants'
};

// Tags jeux adultes - Dictionnaire complet de traductions
export const adulteGameTagTranslations: Record<string, string> = {
  // Types de graphismes
  '2dcg': '2DCG',
  '3dcg': '3DCG',
  'animated': 'Animé',
  
  // Catégories principales
  'adventure': 'Aventure',
  'comedy': 'Comédie',
  'drama': 'Drame',
  'fantasy': 'Fantasy',
  'horror': 'Horreur',
  'paranormal': 'Paranormal',
  'parody': 'Parodie',
  'romance': 'Romance',
  'sci-fi': 'Science-fiction',
  
  // Types de jeux
  'kinetic novel': 'Roman visuel',
  'mobile game': 'Jeu mobile',
  'multiple endings': 'Fins multiples',
  'point & click': 'Point & Click',
  'sandbox': 'Sandbox',
  
  // Catégories de personnages
  'adjustable age': 'Âge ajustable',
  'big ass': 'Gros fessier',
  'big tits': 'Gros seins',
  'dilf': 'DILF',
  'female protagonist': 'Protagoniste féminin',
  'loli': 'Loli',
  'male protagonist': 'Protagoniste masculin',
  'milf': 'MILF',
  'monster': 'Monstre',
  'monster girl': 'Fille monstre',
  'multiple protagonist': 'Protagonistes multiples',
  'shota': 'Shota',
  'small tits': 'Petits seins',
  'teen': 'Adolescent',
  'tentacles': 'Tentacules',
  'twins': 'Jumeaux',
  'virgin': 'Vierge',
  
  // Thèmes
  'ahegao': 'Ahegao',
  'bdsm': 'BDSM',
  'bestiality': 'Bestialité',
  'blackmail': 'Chantage',
  'cheating': 'Infidélité',
  'combat': 'Combat',
  'corruption': 'Corruption',
  'cosplay': 'Cosplay',
  'drugs': 'Drogues',
  'dystopian setting': 'Univers dystopique',
  'exhibitionism': 'Exhibitionnisme',
  'female domination': 'Domination féminine',
  'furry': 'Furry',
  'futa/trans': 'Futa/Trans',
  'futa/trans (avoidable)': 'Futa/Trans (évitable)',
  'gay': 'Gay',
  'graphic violence': 'Violence graphique',
  'group sex': 'Partouze',
  'harem': 'Harem',
  'humiliation': 'Humiliation',
  'humor': 'Humour',
  'impregnation': 'Impregnation',
  'incest': 'Inceste',
  'interracial': 'Interracial',
  'lesbian': 'Lesbien',
  'male domination': 'Domination masculine',
  'maledom': 'Maledom',
  'necrophilia': 'Nécrophilie',
  'netorase (sharing)': 'Netorase (partage)',
  'no sexual content': 'Pas de contenu sexuel',
  'possession': 'Possession',
  'pregnancy': 'Grossesse',
  'prostitution': 'Prostitution',
  'rape': 'Viol',
  'school setting': 'Milieu scolaire',
  'sexual harassment': 'Harcèlement sexuel',
  'sharing': 'Partage',
  'slave': 'Esclave',
  'spanking': 'Fessée',
  'swinging': 'Échangisme',
  'transgender': 'Transgenre',
  'voyeurism': 'Voyeurisme',
  
  // Actes sexuels
  'anal sex': 'Sexe anal',
  'creampie': 'Creampie',
  'footjob': 'Footjob',
  'groping': 'Pelotage',
  'handjob': 'Branlette',
  'internal view': 'Vue interne',
  'lactation': 'Lactation',
  'masturbation': 'Masturbation',
  'multiple penetration': 'Pénétration multiple',
  'oral sex': 'Sexe oral',
  'pov': 'POV',
  'sex toys': 'Sextoys',
  'sleep sex': 'Sexe endormi',
  'squirting': 'Éjaculation féminine',
  'stripping': 'Strip-tease',
  'teasing': 'Taquinerie',
  'titfuck': 'Titfuck',
  'urination': 'Urolagnie',
  'vaginal sex': 'Sexe vaginal',
  'watersports': 'Urolagnie'
};

// Sources
export const sourceTranslations: Record<string, string> = {
  'Manga': 'Manga',
  'Light novel': 'Light novel',
  'Visual novel': 'Visual novel',
  'Game': 'Jeu vidéo',
  'Original': 'Œuvre originale',
  '4-koma manga': 'Manga 4-koma',
  'Web manga': 'Web manga',
  'Novel': 'Roman',
  'Book': 'Livre',
  'Card game': 'Jeu de cartes',
  'Radio': 'Radio',
  'Music': 'Musique',
  'Other': 'Autre',
  'Unknown': 'Inconnu'
};

// Statuts de diffusion/publication
export const statusTranslations: Record<string, string> = {
  // Formats anime standards
  'Currently Airing': 'En cours de diffusion',
  'Finished Airing': 'Terminé',
  'Not yet aired': 'Pas encore diffusé',
  // Formats anime avec underscore (MAL API)
  'currently_airing': 'En cours de diffusion',
  'finished_airing': 'Terminé',
  'not_yet_aired': 'Pas encore diffusé',
  // Formats anime minuscules
  'currently airing': 'En cours de diffusion',
  'finished airing': 'Terminé',
  'not yet aired': 'Pas encore diffusé',
  // Statuts de publication manga
  'Publishing': 'En cours',
  'Finished': 'Terminé',
  'Not yet published': 'Pas encore publié',
  'On Hiatus': 'En pause',
  'Discontinued': 'Arrêté',
  // Variantes françaises
  'En cours': 'En cours',
  'Terminée': 'Terminé',
  'Terminé': 'Terminé',
  'En pause': 'En pause',
  'Arrêté': 'Arrêté'
};

// Ratings
export const ratingTranslations: Record<string, string> = {
  'G - All Ages': 'G - Tout public',
  'PG - Children': 'PG - Enfants',
  'PG-13 - Teens 13 or older': 'PG-13 - Adolescents 13 ans et +',
  'R - 17+ (violence & profanity)': 'R - 17+ (violence et langage)',
  'R+ - Mild Nudity': 'R+ - Nudité légère',
  'Rx - Hentai': 'Rx - Hentai'
};

// Saisons
export const seasonTranslations: Record<string, string> = {
  'winter': 'Hiver',
  'spring': 'Printemps',
  'summer': 'Été',
  'fall': 'Automne',
  'Winter': 'Hiver',
  'Spring': 'Printemps',
  'Summer': 'Été',
  'Fall': 'Automne'
};

/**
 * Déduplique une liste de genres/thèmes traduits
 */
function deduplicateItems(items: string[]): string[] {
  const seen = new Set<string>();
  const normalized = items.map(item => {
    // Normaliser les espaces et la casse pour la comparaison
    const normalizedItem = item.trim().toLowerCase().replace(/\s+/g, ' ');
    return normalizedItem;
  });
  
  const result: string[] = [];
  normalized.forEach((normalizedItem, index) => {
    if (!seen.has(normalizedItem)) {
      seen.add(normalizedItem);
      result.push(items[index].trim());
    }
  });
  
  return result;
}

/**
 * Traduit un genre unique
 */
export function translateGenre(genre: string): string {
  if (!genre) return '';
  const trimmed = String(genre).trim();
  return genreTranslations[trimmed] || trimmed;
}

/**
 * Traduit une liste de genres séparés par des virgules et déduplique les résultats
 */
export function translateGenres(genres: string): string {
  if (!genres) return '';
  
  const translated = genres
    .split(',')
    .map(g => {
      const trimmed = g.trim();
      return genreTranslations[trimmed] || trimmed;
    })
    .filter(g => g); // Retirer les valeurs vides
    
  // Dédupliquer les genres traduits
  const deduplicated = deduplicateItems(translated);
  
  return deduplicated.join(', ');
}

/**
 * Traductions des statuts de publication
 */
export const publicationStatusTranslations: Record<string, string> = {
  // Formats MAL standards
  'Finished': 'Terminée',
  'Publishing': 'En cours',
  'On Hiatus': 'En pause',
  'Discontinued': 'Abandonnée',
  'Not yet published': 'Annoncée',
  // Formats alternatifs possibles
  'currently_publishing': 'En cours',
  'finished': 'Terminée',
  'on_hiatus': 'En pause',
  'discontinued': 'Abandonnée',
  'not_yet_published': 'Annoncée',
  // Formats déjà traduits
  'Terminée': 'Terminée',
  'En cours': 'En cours',
  'En pause': 'En pause',
  'Abandonnée': 'Abandonnée',
  'Annoncée': 'Annoncée'
};

/**
 * Traduit un statut de publication en français
 */
export function translatePublicationStatus(status: string | null | undefined): string {
  if (!status) return 'En cours';
  return publicationStatusTranslations[status] || status;
}

/**
 * Traduit un thème unique
 */
export function translateTheme(theme: string): string {
  if (!theme) return '';
  const trimmed = String(theme).trim();
  return themeTranslations[trimmed] || trimmed;
}

/**
 * Traduit une liste de thèmes séparés par des virgules et déduplique les résultats
 */
export function translateThemes(themes: string): string {
  if (!themes) return '';
  
  const translated = themes
    .split(',')
    .map(t => {
      const trimmed = t.trim();
      return themeTranslations[trimmed] || trimmed;
    })
    .filter(t => t); // Retirer les valeurs vides
    
  // Dédupliquer les thèmes traduits
  const deduplicated = deduplicateItems(translated);
  
  return deduplicated.join(', ');
}

/**
 * Traduit une liste de démographies séparées par des virgules et déduplique les résultats
 */
export function translateDemographics(demographics: string): string {
  if (!demographics) return '';
  
  const translated = demographics
    .split(',')
    .map(d => {
      const trimmed = d.trim();
      return demographicTranslations[trimmed] || trimmed;
    })
    .filter(d => d); // Retirer les valeurs vides
    
  // Dédupliquer les démographies traduites
  const deduplicated = deduplicateItems(translated);
  
  return deduplicated.join(', ');
}

/**
 * Traduit une démographie (fonction simple pour une valeur unique)
 */
export function translateDemographic(demographic: string): string {
  return demographicTranslations[demographic.trim()] || demographic;
}

/**
 * Traduit un tag de jeu adulte unique
 */
export function translateAdulteGameTag(tag: string): string {
  if (!tag) return '';
  const trimmed = String(tag).trim();
  return adulteGameTagTranslations[trimmed] || trimmed;
}

/**
 * Traduit une liste de tags jeux adultes séparés par des virgules et déduplique les résultats
 */
export function translateAdulteGameTags(tags: string | string[]): string {
  if (!tags) return '';
  
  // Gérer à la fois string et array
  const tagsArray = Array.isArray(tags) 
    ? tags 
    : typeof tags === 'string'
      ? tags.split(',').map(t => t.trim()).filter(t => t)
      : [];
  
  const translated = tagsArray
    .map(tag => {
      const trimmed = String(tag).trim();
      return adulteGameTagTranslations[trimmed] || trimmed;
    })
    .filter(t => t); // Retirer les valeurs vides
    
  // Dédupliquer les tags traduits
  const deduplicated = deduplicateItems(translated);
  
  return deduplicated.join(', ');
}

/**
 * Traduit une source
 */
export function translateSource(source: string): string {
  return sourceTranslations[source.trim()] || source;
}

/**
 * Traduit un statut de diffusion
 */
export function translateStatus(status: string): string {
  return statusTranslations[status.trim()] || status;
}

/**
 * Traduit un rating
 */
export function translateRating(rating: string): string {
  return ratingTranslations[rating.trim()] || rating;
}

/**
 * Traduit une saison
 */
export function translateSeason(season: string): string {
  return seasonTranslations[season.trim()] || season;
}
